{"ast":null,"code":"import _classCallCheck from \"/home/asim/Documents/LUMS/Semester_6/Snake_Game/snake_game/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/asim/Documents/LUMS/Semester_6/Snake_Game/snake_game/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/asim/Documents/LUMS/Semester_6/Snake_Game/snake_game/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/asim/Documents/LUMS/Semester_6/Snake_Game/snake_game/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/asim/Documents/LUMS/Semester_6/Snake_Game/snake_game/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/asim/Documents/LUMS/Semester_6/Snake_Game/snake_game/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/asim/Documents/LUMS/Semester_6/Snake_Game/snake_game/src/App.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { getCanvasPosition } from './utils/formulas';\nimport Canvas from './components/Canvas';\nimport * as Auth0 from 'auth0-web';\nimport io from 'socket.io-client';\nAuth0.configure({\n  domain: 'asim29.auth0.com',\n  clientID: 'ZgFWH7EKUS3pEffl6hwpubOjCI6FnKQZ',\n  redirectUri: 'http://localhost:3000/',\n  responseType: 'token id_token',\n  scope: 'openid profile manage:points',\n  audience: 'https://aliens-go-home.digituz.com.br'\n});\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n    _this.shoot = _this.shoot.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"shoot\",\n    value: function shoot() {\n      this.props.shoot(this.canvasMousePosition);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var self = this;\n      Auth0.handleAuthCallback();\n      Auth0.subscribe(function (auth) {\n        if (!auth) return;\n        var playerProfile = Auth0.getProfile();\n        var currentPlayer = {\n          id: playerProfile.sub,\n          maxScore: 0,\n          name: playerProfile.name,\n          picture: playerProfile.picture\n        };\n\n        _this2.props.loggedIn(currentPlayer);\n\n        var socket = io('http://localhost:3001', {\n          query: \"token=\".concat(Auth0.getAccessToken())\n        });\n        var emitted = false;\n        socket.on('players', function (players) {\n          _this2.props.leaderboardLoaded(players);\n\n          if (emitted) return;\n          socket.emit('new-max-score', {\n            id: playerProfile.sub,\n            maxScore: 120,\n            name: playerProfile.name,\n            picture: playerProfile.picture\n          });\n          emitted = true;\n          setTimeout(function () {\n            socket.emit('new-max-score', {\n              id: playerProfile.sub,\n              maxScore: 222,\n              name: playerProfile.name,\n              picture: playerProfile.picture\n            });\n          }, 5000);\n        });\n      });\n      setInterval(function () {\n        self.props.moveObjects(self.canvasMousePosition);\n      }, 10);\n\n      window.onresize = function () {\n        var cnv = document.getElementById('aliens-go-home-canvas');\n        cnv.style.width = \"\".concat(window.innerWidth, \"px\");\n        cnv.style.height = \"\".concat(window.innerHeight, \"px\");\n      };\n\n      window.onresize();\n    }\n  }, {\n    key: \"trackMouse\",\n    value: function trackMouse(event) {\n      this.canvasMousePosition = getCanvasPosition(event);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(Canvas, {\n        angle: this.props.angle,\n        currentPlayer: this.props.currentPlayer,\n        gameState: this.props.gameState,\n        players: this.props.players,\n        startGame: this.props.startGame,\n        trackMouse: function trackMouse(event) {\n          return _this3.trackMouse(event);\n        },\n        shoot: this.shoot,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return App;\n}(Component);\n\nApp.propTypes = {\n  angle: PropTypes.number.isRequired,\n  gameState: PropTypes.shape({\n    started: PropTypes.bool.isRequired,\n    kills: PropTypes.number.isRequired,\n    lives: PropTypes.number.isRequired,\n    flyingObjects: PropTypes.arrayOf(PropTypes.shape({\n      position: PropTypes.shape({\n        x: PropTypes.number.isRequired,\n        y: PropTypes.number.isRequired\n      }).isRequired,\n      id: PropTypes.number.isRequired\n    })).isRequired\n  }).isRequired,\n  moveObjects: PropTypes.func.isRequired,\n  startGame: PropTypes.func.isRequired,\n  currentPlayer: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    maxScore: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    picture: PropTypes.string.isRequired\n  }),\n  leaderboardLoaded: PropTypes.func.isRequired,\n  loggedIn: PropTypes.func.isRequired,\n  players: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    maxScore: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    picture: PropTypes.string.isRequired\n  }))\n};\nApp.defaultProps = {\n  currentPlayer: null,\n  players: null\n};\nexport default App;","map":{"version":3,"sources":["/home/asim/Documents/LUMS/Semester_6/Snake_Game/snake_game/src/App.js"],"names":["React","Component","PropTypes","getCanvasPosition","Canvas","Auth0","io","configure","domain","clientID","redirectUri","responseType","scope","audience","App","props","shoot","bind","canvasMousePosition","self","handleAuthCallback","subscribe","auth","playerProfile","getProfile","currentPlayer","id","sub","maxScore","name","picture","loggedIn","socket","query","getAccessToken","emitted","on","players","leaderboardLoaded","emit","setTimeout","setInterval","moveObjects","window","onresize","cnv","document","getElementById","style","width","innerWidth","height","innerHeight","event","angle","gameState","startGame","trackMouse","propTypes","number","isRequired","shape","started","bool","kills","lives","flyingObjects","arrayOf","position","x","y","func","string","defaultProps"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport { getCanvasPosition } from './utils/formulas';\nimport Canvas from './components/Canvas';\nimport * as Auth0 from 'auth0-web';\nimport io from 'socket.io-client';\n\nAuth0.configure({\n  domain: 'asim29.auth0.com',\n  clientID: 'ZgFWH7EKUS3pEffl6hwpubOjCI6FnKQZ',\n  redirectUri: 'http://localhost:3000/',\n  responseType: 'token id_token',\n  scope: 'openid profile manage:points',\n  audience: 'https://aliens-go-home.digituz.com.br',\n});\n\nclass App extends Component {\n\tconstructor(props) {\n    super(props)\n    this.shoot = this.shoot.bind(this);\n  }\n\n  shoot() {\n    this.props.shoot(this.canvasMousePosition);\n  }\n  \n  componentDidMount() {\n    const self = this;\n\n    Auth0.handleAuthCallback();\n\n    Auth0.subscribe((auth) => {\n      if (!auth) return;\n\n      const playerProfile = Auth0.getProfile();\n      const currentPlayer = {\n        id: playerProfile.sub,\n        maxScore: 0,\n        name: playerProfile.name,\n        picture: playerProfile.picture,\n      };\n\n      this.props.loggedIn(currentPlayer);\n\n      const socket = io('http://localhost:3001', {\n        query: `token=${Auth0.getAccessToken()}`,\n      });\n\n      let emitted = false;\n      socket.on('players', (players) => {\n        this.props.leaderboardLoaded(players);\n\n        if (emitted) return;\n        socket.emit('new-max-score', {\n          id: playerProfile.sub,\n          maxScore: 120,\n          name: playerProfile.name,\n          picture: playerProfile.picture,\n        });\n        emitted = true;\n        setTimeout(() => {\n          socket.emit('new-max-score', {\n            id: playerProfile.sub,\n            maxScore: 222,\n            name: playerProfile.name,\n            picture: playerProfile.picture,\n          });\n        }, 5000);\n      });\n    });\n\n    setInterval(() => {\n        self.props.moveObjects(self.canvasMousePosition);\n    }, 10);\n    \n    window.onresize = () => {\n      const cnv = document.getElementById('aliens-go-home-canvas');\n      cnv.style.width = `${window.innerWidth}px`;\n      cnv.style.height = `${window.innerHeight}px`;\n    };\n    window.onresize();\n  }\n\n  trackMouse(event) {\n    this.canvasMousePosition = getCanvasPosition(event);\n  }\n\n  render() {\n    return (\n      <Canvas\n        angle={this.props.angle}\n        currentPlayer={this.props.currentPlayer}\n        gameState={this.props.gameState}\n        players={this.props.players}\n        startGame={this.props.startGame}\n        trackMouse={event => (this.trackMouse(event))}\n        shoot={this.shoot}\n      />\n    );\n  }\n}\n\nApp.propTypes = {\n  angle: PropTypes.number.isRequired,\n  gameState: PropTypes.shape({\n    started: PropTypes.bool.isRequired,\n    kills: PropTypes.number.isRequired,\n    lives: PropTypes.number.isRequired,\n    flyingObjects: PropTypes.arrayOf(PropTypes.shape({\n      position: PropTypes.shape({\n        x: PropTypes.number.isRequired,\n        y: PropTypes.number.isRequired,\n      }).isRequired,\n      id: PropTypes.number.isRequired,\n    })).isRequired,\n  }).isRequired,\n  moveObjects: PropTypes.func.isRequired,\n  startGame: PropTypes.func.isRequired,\n  currentPlayer: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    maxScore: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    picture: PropTypes.string.isRequired,\n  }),\n  leaderboardLoaded: PropTypes.func.isRequired,\n  loggedIn: PropTypes.func.isRequired,\n  players: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    maxScore: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    picture: PropTypes.string.isRequired,\n  })),\n};\n\nApp.defaultProps = {\n  currentPlayer: null,\n  players: null,\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}